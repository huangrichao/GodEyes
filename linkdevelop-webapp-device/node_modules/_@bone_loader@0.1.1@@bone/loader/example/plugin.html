<!DOCTYPE html>
<head>
    <meta charset="UTF-8">
    <title>loader</title>
</head>
<body>
    <script src="../dist/index.js" global-name="loader"></script>
    <script>
        var hash = {};
        loader.plugin("load", function(info){
            var url = loader.utils.resolvePath("scripts/" + info.url + ".js");
            hash[info.url] = url;

            return {
                url: url
            };
        });

        loader.plugin("get", function(info){
            return {
                moduleId: hash[info.moduleId]
            };
        });

        loader.async("test1", function(){
            console.log(loader("test1"));
        });
        loader.async("test2", function(){
            console.log(loader("test2"));
        });
    </script>
</body>
</html>
